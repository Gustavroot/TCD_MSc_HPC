%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Short Sectioned Assignment
% LaTeX Template
% Version 1.0 (5/5/12)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Frits Wenneker (http://www.howtotex.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[paper=a4, fontsize=11pt]{scrartcl} % A4 paper and 11pt font size

\usepackage{graphicx}
\graphicspath{ {images/} }
\usepackage{verbatim}
\usepackage{textcomp}
\usepackage{changepage}
\usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs
\usepackage{fourier} % Use the Adobe Utopia font for the document - comment this line to return to the LaTeX default
\usepackage[english]{babel} % English language/hyphenation
\usepackage{amsmath,amsfonts,amsthm} % Math packages

\usepackage{setspace}
\renewcommand{\baselinestretch}{1.3}
\usepackage{lipsum} % Used for inserting dummy 'Lorem ipsum' text into the template

\usepackage{color}

\usepackage{sectsty} % Allows customizing section commands
\allsectionsfont{\centering \normalfont\scshape} % Make all sections centered, the default font and small caps

\usepackage{fancyhdr} % Custom headers and footers
\pagestyle{fancyplain} % Makes all pages in the document conform to the custom headers and footers
\fancyhead{} % No page header - if you want one, create it in the same way as the footers below
\fancyfoot[L]{} % Empty left footer
\fancyfoot[C]{} % Empty center footer
\fancyfoot[R]{\thepage} % Page numbering for right footer
\renewcommand{\headrulewidth}{0pt} % Remove header underlines
\renewcommand{\footrulewidth}{0pt} % Remove footer underlines
\setlength{\headheight}{13.6pt} % Customize the height of the header

\numberwithin{equation}{section} % Number equations within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{figure}{section} % Number figures within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{table}{section} % Number tables within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)

\setlength\parindent{0pt} % Removes all indentation from paragraphs - comment this line for an assignment with lots of text

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} % Create horizontal rule command with 1 argument of height

\title{	
\normalfont \normalsize 
\textsc{TRINITY COLLEGE DUBLIN, school of Mathematics} \\ [25pt] % Your university, school and/or department name(s)
\horrule{0.5pt} \\[0.4cm] % Thin top horizontal rule
\huge Assignment \#7, Module: MA5621 \\ % The assignment title
\horrule{2pt} \\[0.5cm] % Thick bottom horizontal rule
}

\author{Gustavo Ramirez} % Your name

\date{\normalsize\today} % Today's date or a custom date

\begin{document}

\maketitle % Print the title

%----------------------------------------------------------------------------------------
%	PROBLEM 1
%----------------------------------------------------------------------------------------

\begin{comment}
\section{Problem description}

\begin{enumerate}
\item 
\item 
\item 
\item 
\end{enumerate}

\end{comment}

\newpage


\begin{comment}

USEFUL LINKS:

official sources for terminology:
-----
http://www.intel.com/content/www/us/en/support/topics/glossary.html
https://www-01.ibm.com/software/globalization/terminology/a.html
-----




about IMB processors:
-----

insert in google: list of ibm processors
https://en.wikipedia.org/wiki/List_of_IBM_products
https://www-01.ibm.com/software/passportadvantage/guide_to_identifying_processor_family.html
http://www.nextplatform.com/2015/08/10/ibm-roadmap-extends-power-chips-to-2020-and-beyond/
http://www.theverge.com/2015/7/9/8919091/ibm-7nm-transistor-processor
https://www.ibm.com/developerworks/ibmi/library/i-ibmi-7_2-and-ibm-power8/
-----




\end{comment}

\section{PART 1}

\subsection{Makefiles}

In the sub-directory './makefiles/' can be found the 4 combinations of compilers and BLAS libraries; in this case, time only permitted to run the basic 4 combinations, gcc with ACML and MKL, and intel11 with ACML and MKL.


\subsection{On the automation scripts (BASH-PYTHON scripts)}

As mentioned before, only the 4 basic combinations (gcc with two flavours of BLAS, and intel11 with same two flavours of BLAS) were tested.

\textbf{Although only those 4 were executed, a few Bash and Python scripts were written to automate the execution for all combinations for each number of cores.} The way I executed it was simply by submitting a job through 'sbatch sbatch.sh' (note that sbatch.sh is located in ./src/; \textbf{instructions on how to use those scripts are in ./src/README}). The most significant point here is that those scripts allow for the execution using gcc and all intel versions (11, 12, 15).

The makefiles generated from executing ./src/general.sh don't include the modules initially, so added them at the end by hand, although it is very easy to automatically add them from that Bash script.


\subsection{Rough calculation of $N$}


Executing 'free -m | grep Mem', from that line is seen that the available RAM is 7869 B. Then (through a very informal calculation, syntax-wise):

$$ N^2 \cdot 8 \textasciitilde 0.8 \cdot RAM = 0.8 \cdot 8GB \Rightarrow N \textasciitilde 2.8 \cdot 10^4 $$





\section{PART 4}

The results for performances can be found in the file performances.csv, for the four basic simulations.

Also, some extra time allowed to run a few executions for 16 cores; the results are shown in the file slurm-outputs/slurm-245975.out, where evidently the performance doubles (as the number of cores doubled).


\section{PART 5}


For arch=lonsdale\_gcc\_openmpi\_mkl, the bigger the value of NB, the better the performance; of course, within the four values tried for NB, and this is in average, as the 3rd value in ascendant order gave the best results, i.e. NB = 140. Even more, in general NB = 140 gave the best results.

BLAS-wise, ACML showed the best performances.

Also, gcc gave slightly better results than icc.

In general, the submission of jobs to the queueing system ran smoothly, no problems at all, due in great part to the implemented Bash and Python scripts (located in ./src/).



\end{document}